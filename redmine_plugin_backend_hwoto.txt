how to get timeentry:
entries = TimeEntry.joins(:activity, :project, {:issue => [:tracker, :status]})
  .where("#{TimeEntry.table_name}.user_id = ? AND #{TimeEntry.table_name}.spent_on BETWEEN ? AND ?", @user.id, Date.today - sql_period, Date.today)
  .order("#{TimeEntry.table_name}.spent_on DESC, #{Project.table_name}.name ASC, #{Tracker.table_name}.position ASC, #{Issue.table_name}.id ASC")
entries_by_day = entries.group_by(&:spent_on)

entries_by_day.keys.sort.reverse.each do |day|
entries_by_day[day].sum(&:hours).to_f
end


issue :
condition = [@user.id]
condition += @user.group_ids if setting.show_assigned_to_group?
Issue.visible.open.where(assigned_to_id: condition)
Issue.visible.open.where(assigned_to_id: condition).count
